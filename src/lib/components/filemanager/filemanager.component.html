<app-toolbar
    [currentTab]="currentTab"
    [(showHiddenFiles)]="showHiddenFiles"
    [(showSidebar)]="showSidebar"
    [(sortOrder)]="sortOrder"
    (onBreadcrumbClick)="onBreadcrumbClick($event)"
/>

<as-split direction="horizontal" [gutterSize]="1">
    <as-split-area [size]="20" style="background-color: #2c2c2c;">
        <div class="sidebar" *ngIf="showSidebar" (click)="currentTab.selection = []">
            <ul>
                <li (click)="onBreadcrumbClick({ id: '/' })">
                    <img style="width: 24px; margin-right: 8px" src="assets/lib/icons/folder-open.svg">
                    Root
                </li>
                <li *ngFor="let dir of currentTab.sidebarItems" (click)="onBreadcrumbClick({ id: dir.path })">
                    <!-- <img style="width: 24px; margin-right: 8px" src="assets/lib/icons/folder.svg"> -->
                    <img style="height: 24px; margin-right: 8px" [src]="dir['_icon'].path"/>
                    {{dir.name}}
                </li>
            </ul>
        </div>
    </as-split-area>
    <as-split-area [size]="80" style="background-color: #272727;">
        <div class="content"
            [style.--tab-height]="tabs.length > 1 ? '36px' : '0'"
        >
            <mat-tab-group #tabGroup (selectedTabChange)="currentTab = tabs[$event.index]" [(selectedIndex)]="tabIndex">
                <mat-tab *ngFor="let tab of tabs">
                    <ng-template mat-tab-label>
                        {{tab.label}}
                        <mat-icon
                            class="close"
                            (click)="closeTab(tab)">
                            close
                        </mat-icon>
                    </ng-template>

                    <ng-template matTabContent>
                        <app-file-grid
                            [(path)]="tab.path"
                            (pathChange)="onTabPathChange(tab)"
                            [(selection)]="tab.selection"
                            (fileOpen)="onFileOpen($event)"
                            (loadFiles)="onTabLoadFiles(tab, $event)"
                            [viewMode]="tab.viewMode"
                            [config]="config"
                        />
                    </ng-template>
                </mat-tab>
            </mat-tab-group>
        </div>
    </as-split-area>
</as-split>
